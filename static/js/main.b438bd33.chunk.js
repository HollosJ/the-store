(this["webpackJsonpstore-api"]=this["webpackJsonpstore-api"]||[]).push([[0],{27:function(e,t,s){},34:function(e,t,s){"use strict";s.r(t);var i=s(0),c=s.n(i),n=s(20),a=s.n(n),r=s(18),l=s(14),d=s(7),j=(s(27),s(8)),o=s(1),b=function(e){return Object(o.jsxs)("div",{className:"basket",children:[e.items.length>0?e.items.slice(0,3).map((function(t,s){return Object(o.jsxs)("div",{className:"basket__item",children:[Object(o.jsx)("span",{className:"basket__item-name",children:t.title}),Object(o.jsxs)("span",{className:"basket__item-quantity",children:["x",t.qt]}),Object(o.jsxs)("span",{className:"basket__item-price",children:["\xa3",(t.price*t.qt).toFixed(2)]}),Object(o.jsx)("div",{className:"basket__item-delete",onClick:function(){return e.delete(t)},children:"X"})]},s)})):"Basket empty!",e.items.length>0?Object(o.jsxs)("div",{className:"btn btn--secondary",children:["See full basket\xa0",Object(o.jsx)(j.c,{})]}):null,e.items.length>0?Object(o.jsx)("div",{className:"btn btn--primary",onClick:e.clear,children:"Clear basket"}):null]})},m=s(9),u=function(e){var t=Object(i.useState)(!1),s=Object(d.a)(t,2),c=s[0],n=s[1],a=Object(i.useState)(0),r=Object(d.a)(a,2),l=r[0],u=r[1];Object(i.useEffect)((function(){var t=0;e.items.forEach((function(e){t+=e.price*e.qt})),u(t)}),[e.items]);return Object(o.jsx)("div",{className:"nav",children:Object(o.jsxs)("div",{className:"container",children:[Object(o.jsx)(m.b,{to:"/",children:Object(o.jsxs)("h1",{children:[Object(o.jsx)("span",{className:"logo-the",children:"the"}),"Store"]})}),Object(o.jsxs)("div",{className:"nav__links",children:[Object(o.jsx)(m.b,{to:"/wishlist",className:"btn btn--secondary btn__wishlist",children:"Wishlist"}),Object(o.jsxs)("div",{className:"btn btn--primary btn__basket",onClick:function(){n(!c)},children:[Object(o.jsx)(j.c,{})," \xa0\xa3",l.toFixed(2)]})]}),c?Object(o.jsx)(b,{items:e.items,delete:e.delete,clear:e.clear}):null]})})},h=function(e){return Object(o.jsxs)("div",{className:"card",children:[Object(o.jsx)("div",{className:"card__img",children:Object(o.jsx)("img",{src:e.img,alt:e.name})}),Object(o.jsxs)("div",{className:"card__info",children:[Object(o.jsxs)(m.b,{to:"/items/".concat(e.id),className:"card__info-name fw-sm",children:[e.name.split(" ").slice(0,7).join(" "),"..."]}),Object(o.jsxs)("span",{className:"card__info-price",children:["\xa3",e.price.toFixed(2)]})]}),Object(o.jsxs)("div",{className:"card__btns",children:[Object(o.jsxs)("div",{className:"addToBasket btn btn--primary",onClick:function(){return e.addToBasket(e.id)},children:["Add to basket\xa0",Object(o.jsx)(j.c,{})]}),Object(o.jsx)("div",{className:"addToWishlist btn btn--secondary",onClick:e.inWishlist?function(){return e.removeFromWishlist(e.id)}:function(){return e.addToWishlist(e.id)},children:e.inWishlist?Object(o.jsx)(j.a,{className:"addToWishlist--filled"}):Object(o.jsx)(j.b,{})})]})]})},O=function(e){return Object(o.jsx)("div",{className:"grid",children:e.items.length>0?e.items.map((function(t){return Object(o.jsx)(h,{id:t.id,name:t.title,img:t.image,price:t.price,addToBasket:e.addToBasket,addToWishlist:e.addToWishlist,removeFromWishlist:e.removeFromWishlist,inWishlist:!!t.inWishlist},t.id)})):Object(o.jsx)("div",{className:"spinner"})})},f=function(e){var t=e.match,s=Object(i.useState)({}),c=Object(d.a)(s,2),n=c[0],a=c[1],r=Object(i.useState)(!0),l=Object(d.a)(r,2),j=l[0],b=l[1];return Object(i.useEffect)((function(){fetch("https://fakestoreapi.com/products/".concat(t.params.id)).then((function(e){return e.json()})).then((function(e){return a(e)})),b(!1)}),[t.params.id]),j?Object(o.jsx)("div",{children:"loading..."}):Object(o.jsxs)("div",{className:"item",children:[Object(o.jsx)("img",{className:"item__img",src:n.image,alt:""}),Object(o.jsx)("h1",{className:"item__title",children:n.title}),Object(o.jsx)("p",{className:"item__desc",children:n.description})]})},x=function(e){return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("h1",{className:"fw-xl clr-nl",children:"Wishlist"}),Object(o.jsx)("div",{className:"grid",children:e.items.map((function(t,s){return Object(o.jsx)("div",{onClick:function(){return e.removeFromWishlist(t)},children:t.title},s)}))})]})},p=s(2),v=JSON.parse(localStorage.getItem("basket"))||[],N=JSON.parse(localStorage.getItem("wishlist"))||[],_=function(){var e=Object(i.useState)([]),t=Object(d.a)(e,2),s=t[0],c=t[1],n=Object(i.useState)(v),a=Object(d.a)(n,2),j=a[0],b=a[1],h=Object(i.useState)(N),_=Object(d.a)(h,2),k=_[0],g=_[1];Object(i.useEffect)((function(){fetch("https://fakestoreapi.com/products").then((function(e){return e.json()})).then((function(e){k.forEach((function(t){var s=e.indexOf(e.find((function(e){return e.id===t.id})));e[s].inWishlist=!0})),c(e)}))}),[]),Object(i.useEffect)((function(){localStorage.setItem("basket",JSON.stringify(j))}),[j]),Object(i.useEffect)((function(){localStorage.setItem("wishlist",JSON.stringify(k))}),[k]);var W=function(e){var t=s.find((function(t){return t.id===e})),i=Object(l.a)(j),c=i.find((function(t){return e===t.id}));c?c.qt++:(c=Object(r.a)(Object(r.a)({},t),{},{qt:1}),i.push(c)),b(i)},S=function(e){var t=s.find((function(t){return t.id===e})),i=Object(l.a)(k);i.find((function(t){return e===t.id}))||(t.inWishlist=!0,i.push(t),g(i))},y=function(e){g(k.filter((function(t){return t.id!==e})));var t=Object(l.a)(s),i=t.indexOf(t.find((function(t){return t.id===e})));t[i].inWishlist=!1};return Object(o.jsx)(m.a,{children:Object(o.jsxs)("div",{className:"App",children:[Object(o.jsx)(u,{className:"Nav",clear:function(){b([])},delete:function(e){b(j.filter((function(t){return t!==e})))},items:j}),Object(o.jsx)("div",{className:"container content",children:Object(o.jsxs)(p.c,{children:[Object(o.jsx)(p.a,{path:"/wishlist",render:function(){return Object(o.jsx)(x,{removeFromWishlist:y,items:k})}}),Object(o.jsx)(p.a,{path:"/items/:id",component:f}),Object(o.jsx)(p.a,{path:"/",render:function(){return Object(o.jsx)(O,{wishlist:k,items:s,addToBasket:W,addToWishlist:S,removeFromWishlist:y})}})]})})]})})};a.a.render(Object(o.jsx)(c.a.StrictMode,{children:Object(o.jsx)(_,{})}),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.b438bd33.chunk.js.map