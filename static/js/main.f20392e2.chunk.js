(this["webpackJsonpstore-api"]=this["webpackJsonpstore-api"]||[]).push([[0],{30:function(e,t,c){},37:function(e,t,c){"use strict";c.r(t);var s=c(0),n=c.n(s),i=c(22),a=c.n(i),r=c(13),l=c.n(r),j=c(20),o=c(19),d=c(17),b=c(4),u=(c(30),c(8)),m=c(1),h=function(e){return Object(m.jsxs)("div",{className:"basket",children:[e.items.length>0?e.items.slice(0,3).map((function(t,c){return Object(m.jsxs)("div",{className:"basket__item",children:[Object(m.jsx)("span",{className:"basket__item-name",children:t.title}),Object(m.jsxs)("span",{className:"basket__item-quantity",children:["x",t.qt]}),Object(m.jsxs)("span",{className:"basket__item-price",children:["\xa3",(t.price*t.qt).toFixed(2)]}),Object(m.jsx)("div",{className:"basket__item-delete",onClick:function(){return e.delete(t)},children:"X"})]},c)})):"Basket empty!",e.items.length>3?Object(m.jsxs)("div",{className:"btn btn--secondary",children:["See full basket\xa0",Object(m.jsx)(u.c,{})]}):null,e.items.length>0?Object(m.jsx)("div",{className:"btn btn--primary",onClick:e.clear,children:"Clear basket"}):null]})},O=c(9),f=function(e){var t=Object(s.useState)(!1),c=Object(b.a)(t,2),n=c[0],i=c[1],a=Object(s.useState)(0),r=Object(b.a)(a,2),l=r[0],j=r[1];Object(s.useEffect)((function(){var t=0;e.items.forEach((function(e){t+=e.price*e.qt})),j(t)}),[e.items]);return Object(m.jsx)("div",{className:"nav",children:Object(m.jsxs)("div",{className:"container",children:[Object(m.jsx)(O.b,{to:"/",children:Object(m.jsxs)("h1",{children:[Object(m.jsx)("span",{className:"logo-the",children:"the"}),"Store"]})}),Object(m.jsxs)("div",{className:"nav__links",children:[Object(m.jsx)(O.b,{to:"/wishlist",className:"btn btn--secondary btn__wishlist",children:"Wishlist"}),Object(m.jsxs)("div",{className:"btn btn--primary btn__basket",onClick:function(){i(!n)},children:[Object(m.jsx)(u.c,{})," \xa0\xa3",l.toFixed(2)]})]}),n?Object(m.jsx)(h,{items:e.items,delete:e.delete,clear:e.clear}):null]})})},x=function(e){return Object(m.jsxs)("div",{className:"card",children:[Object(m.jsx)("div",{className:"card__img",children:Object(m.jsx)("img",{src:e.img,alt:e.name})}),Object(m.jsxs)("div",{className:"card__info",children:[Object(m.jsxs)(O.b,{to:"/items/".concat(e.id),className:"card__info-name fw-sm",children:[e.name.split(" ").slice(0,7).join(" "),"..."]}),Object(m.jsxs)("span",{className:"card__info-price clr-nl",children:["\xa3",e.price.toFixed(2)]})]}),Object(m.jsxs)("div",{className:"card__btns",children:[Object(m.jsxs)("div",{className:"addToBasket btn btn--primary",onClick:function(){return e.addToBasket(e.id)},children:["Add to basket\xa0",Object(m.jsx)(u.c,{})]}),Object(m.jsx)("div",{className:"addToWishlist btn btn--secondary",onClick:function(){return e.addToWishlist(e.id)},children:e.inWishList?Object(m.jsx)(u.a,{}):Object(m.jsx)(u.b,{})})]})]})},p=function(e){var t=Object(s.useState)([]),c=Object(b.a)(t,2),n=c[0],i=c[1];return Object(s.useEffect)((function(){fetch("https://fakestoreapi.com/products").then((function(e){return e.json()})).then((function(e){e.forEach((function(e){e.inWishList=!1})),i(e)}))}),[]),Object(m.jsx)("div",{className:"grid",children:n.length>0?n.map((function(t){return Object(m.jsx)(x,{items:n,id:t.id,name:t.title,img:t.image,price:t.price,desc:t.description,addToBasket:e.addToBasket,addToWishlist:e.addToWishlist},t.id)})):Object(m.jsx)("div",{className:"spinner"})})},v=function(e){var t=e.match,c=Object(s.useState)({}),n=Object(b.a)(c,2),i=n[0],a=n[1],r=Object(s.useState)(!0),l=Object(b.a)(r,2),j=l[0],o=l[1];return Object(s.useEffect)((function(){fetch("https://fakestoreapi.com/products/".concat(t.params.id)).then((function(e){return e.json()})).then((function(e){return a(e)})),o(!1)}),[t.params.id]),j?Object(m.jsx)("div",{children:"loading..."}):Object(m.jsxs)("div",{className:"item",children:[Object(m.jsx)("img",{className:"item__img",src:i.image,alt:""}),Object(m.jsx)("h1",{className:"item__title",children:i.title}),Object(m.jsx)("p",{className:"item__desc",children:i.description})]})},N=function(e){var t=Object(s.useState)([]),c=Object(b.a)(t,2),n=c[0],i=c[1];return Object(s.useEffect)((function(){i(JSON.parse(localStorage.getItem("wishlist")))}),[]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("h1",{className:"fw-xl clr-nl",children:"Wishlist"}),Object(m.jsx)("div",{className:"grid",children:n.map((function(e,t){return Object(m.jsx)("div",{children:e.title},t)}))})]})},k=function(e){return Object(m.jsx)("div",{className:"error",children:e.text})},_=c(2),g=JSON.parse(localStorage.getItem("basket"))||[],S=JSON.parse(localStorage.getItem("wishlist"))||[],w=function(){var e=Object(s.useState)(g),t=Object(b.a)(e,2),c=t[0],n=t[1],i=Object(s.useState)(S),a=Object(b.a)(i,2),r=a[0],u=a[1],h=Object(s.useState)(!1),x=Object(b.a)(h,2),w=x[0],y=x[1];Object(s.useEffect)((function(){localStorage.setItem("basket",JSON.stringify(c))}),[c]),Object(s.useEffect)((function(){localStorage.setItem("wishlist",JSON.stringify(r))}),[r]);var T=function(){var e=Object(d.a)(l.a.mark((function e(t){var s,i,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://fakestoreapi.com/products/".concat(t)).then((function(e){return e.json()}));case 2:s=e.sent,i=Object(o.a)(c),(a=i.find((function(e){return t===e.id})))?a.qt++:(a=Object(j.a)(Object(j.a)({},s),{},{qt:1}),i.push(a)),n(i);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(d.a)(l.a.mark((function e(t){var c,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://fakestoreapi.com/products/".concat(t)).then((function(e){return e.json()}));case 2:c=e.sent,s=Object(o.a)(r),s.find((function(e){return t===e.id}))?W():(s.push(c),u(s));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=function(){y(!0),setTimeout((function(){y(!1)}),5e3)};return Object(m.jsx)(O.a,{children:Object(m.jsxs)("div",{className:"App",children:[Object(m.jsx)(f,{className:"Nav",clear:function(){n([])},delete:function(e){n(c.filter((function(t){return t!==e})))},count:Object.keys(c).length,items:c}),Object(m.jsx)("div",{className:"container content",children:Object(m.jsxs)(_.c,{children:[Object(m.jsx)(_.a,{path:"/",exact:!0,render:function(){return Object(m.jsx)(p,{addToBasket:T,addToWishlist:E})}}),Object(m.jsx)(_.a,{path:"/wishlist",component:N}),Object(m.jsx)(_.a,{path:"/items/:id",component:v})]})}),w?Object(m.jsx)(k,{text:"Item already in wishlist!"}):null]})})};a.a.render(Object(m.jsx)(n.a.StrictMode,{children:Object(m.jsx)(w,{})}),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.f20392e2.chunk.js.map